# ODF on single node openshift

https://github.com/ksingh7/odf-nano

```bash

create_lv() {
    var_vg=$1
    var_lv=$2
    var_size=$3
    lvremove -f $var_vg/$var_lv
    lvcreate -y -L $var_size -n $var_lv $var_vg
    wipefs --all --force /dev/$var_vg/$var_lv
}

create_lv vgdata lvdata01 100G
create_lv vgdata lvdata02 100G

cat << EOF > /data/kvm/disk.xml
<disk type='block' device='disk'>
    <driver name='qemu' type='raw' cache='none' io='native'/>
    <source dev='/dev/vgdata/lvdata01'/>
    <target dev='vdb' bus='virtio'/>
</disk>
EOF

virsh attach-device ocp4-master-0 /data/kvm/disk.xml \
    --persistent \
    --config

cat << EOF > /data/kvm/disk.xml
<disk type='block' device='disk'>
    <driver name='qemu' type='raw' cache='none' io='native'/>
    <source dev='/dev/vgdata/lvdata02'/>
    <target dev='vdc' bus='virtio'/>
</disk>
EOF

virsh attach-device ocp4-master-0 /data/kvm/disk.xml \
    --persistent \
    --config

# if you want to remove the disks
virsh detach-device ocp4-master-0 /data/kvm/disk.xml \
    --persistent \
    --config

virsh dumpxml ocp4-master-0

```