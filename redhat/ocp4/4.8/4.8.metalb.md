# MetalLB on openshift 4.8


```bash
oc get HelmChartRepository -o yaml
# apiVersion: v1
# items:
# - apiVersion: helm.openshift.io/v1beta1
#   kind: HelmChartRepository
#   metadata:
#     annotations:
#       include.release.openshift.io/ibm-cloud-managed: "true"
#       include.release.openshift.io/self-managed-high-availability: "true"
#       include.release.openshift.io/single-node-developer: "true"
#       release.openshift.io/create-only: "true"
#     creationTimestamp: "2021-08-25T14:25:02Z"
#     generation: 1
#     name: openshift-helm-charts
#     resourceVersion: "1045"
#     uid: 7be0c285-39fd-4cde-9f37-85d9b9900fc5
#   spec:
#     connectionConfig:
#       url: https://charts.openshift.io
#     name: OpenShift Helm Charts
# kind: List
# metadata:
#   resourceVersion: ""
#   selfLink: ""

# https://docs.openshift.com/container-platform/4.8/cli_reference/helm_cli/disabling-helm-chart-repositories.html
oc patch  --patch='{"spec": {"disabled": true}}' --type=merge HelmChartRepository/openshift-helm-charts

cat << EOF > /data/install/helm.ocp.yaml
apiVersion: helm.openshift.io/v1beta1
kind: HelmChartRepository
metadata:
  name: openshift-helm-charts-wzh
spec:
 # optional name that might be used by console
  name: openshift-helm-charts-wzh
  connectionConfig:
    url: http://nexus.ocp4.redhat.ren:8082/repository/charts.openshift.io/
EOF
oc create -f /data/install/helm.ocp.yaml

mkdir -p /data/install/metallb
cd /data/install/metallb

wget https://raw.githubusercontent.com/metallb/metallb/v0.10.2/manifests/namespace.yaml
wget https://raw.githubusercontent.com/metallb/metallb/v0.10.2/manifests/metallb.yaml

```